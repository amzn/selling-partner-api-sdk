/**
 * The Selling Partner API for Orders
 * The Selling Partner API for Orders returns orders information. This API supports the following types of orders:  - FBM (Fulfilled by Merchant) - FBA (Fulfilled by Amazon) - read only - Amazon Fresh  This API does not display order data that is more than two years old, except in the JP, AU, and SG marketplaces, for which data from 2016 and after is available.
 *
 * The version of the OpenAPI document: 2026-01-01
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 */

import expect from 'expect.js';
import sinon from 'sinon';
import { join } from 'path';

const modulePath = join(process.cwd(), 'src', 'orders_v2026_01_01', 'index.js');
const TheSellingPartnerApiForOrders = await import(modulePath);

let instance;
let sandbox;
const testEndpoint = 'https://localhost:3000';
const testAccessToken = "testAccessToken";

// Helper function to generate random test data
function generateMockData(dataType, isArray = false) {
  if (!dataType) return {};

  // Handle array types
  if (isArray) {
    return [generateMockData(dataType), generateMockData(dataType)];
  }

  switch(dataType) {
    case 'String':
      return 'mock-' + Math.random().toString(36).substring(2, 10);
    case 'Number':
      return Math.floor(Math.random() * 1000);
    case 'Boolean':
      return Math.random() > 0.5;
    case 'Date':
      return new Date().toISOString();
    default:
      try {
        const ModelClass = TheSellingPartnerApiForOrders[dataType];
        if (ModelClass) {
          const instance = Object.create(ModelClass.prototype);
          return instance;
        }
      } catch (e) {
        console.error("Error creating instance of", dataType);
        return {};
      }
      return {};
  }
}

// Generate mock requests and responses for each operation
const mockgetOrderData = {
  request: {
    'orderId': generateMockData('String'),
  },
  response: {
    data: generateMockData('GetOrderResponse'),
    statusCode: 200,
    headers: {}
  }
};

describe('GetOrderApi', () => {
  beforeEach(() => {
    sandbox = sinon.createSandbox();
    const apiClientInstance = new TheSellingPartnerApiForOrders.ApiClient(testEndpoint);
    apiClientInstance.applyXAmzAccessTokenToRequest(testAccessToken);
    sandbox.stub(apiClientInstance, 'callApi');
    instance = new TheSellingPartnerApiForOrders.GetOrderApi(apiClientInstance);
  });

  afterEach(() => {
    sandbox.restore();
  });

  describe('getOrder', () => {
    it('should successfully call getOrder', async () => {
      instance.apiClient.callApi.resolves(mockgetOrderData.response);

      const params = [
        mockgetOrderData.request['orderId'],
      ];
      const data = await instance.getOrder(...params);

      expect(data instanceof TheSellingPartnerApiForOrders.GetOrderResponse).to.be.true;
      expect(data).to.equal(mockgetOrderData.response.data);
    });

    it('should successfully call getOrderWithHttpInfo', async () => {
      instance.apiClient.callApi.resolves(mockgetOrderData.response);

      const params = [
        mockgetOrderData.request['orderId'],
      ];
      const response = await instance.getOrderWithHttpInfo(...params);

      expect(response).to.have.property('statusCode');
      expect(response.statusCode).to.equal(mockgetOrderData.response.statusCode)
      expect(response).to.have.property('headers');
      expect(response).to.have.property('data');
      expect(response.data).to.equal(mockgetOrderData.response.data)
    });

    it('should handle API errors', async () => {
      const errorResponse = {
        errors: new Error('Expected error to be thrown'),
        statusCode: 400,
        headers: {}
      };
      instance.apiClient.callApi.rejects(errorResponse);

      try {
        const params = [
          mockgetOrderData.request['orderId'],
        ];
        await instance.getOrder(...params);
        throw new Error('Expected error to be thrown');
      } catch (error) {
        expect(error).to.exist;
        expect(error.statusCode).to.equal(400);
      }
    });
  });

  describe('constructor', () => {
    it('should use default ApiClient when none provided', () => {
      const defaultInstance = new TheSellingPartnerApiForOrders.GetOrderApi();
      expect(defaultInstance.apiClient).to.equal(TheSellingPartnerApiForOrders.ApiClient.instance);
    });

    it('should use provided ApiClient', () => {
      const customClient = new TheSellingPartnerApiForOrders.ApiClient();
      const customInstance = new TheSellingPartnerApiForOrders.GetOrderApi(customClient);
      expect(customInstance.apiClient).to.equal(customClient);
    });
  });
});

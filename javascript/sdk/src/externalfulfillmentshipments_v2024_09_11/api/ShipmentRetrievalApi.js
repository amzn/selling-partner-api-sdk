/**
 * The Selling Partner API for Amazon External Fulfillment Shipments Processing
 * You can use the External Fulfillment Shipments API to retrieve, manage, and track shipments processed through Amazon's external fulfillment network. Use this API to get shipment details, monitor status changes, and access fulfillment requirements.
 *
 * The version of the OpenAPI document: 2024-09-11
 * Contact: marketplaceapitest@amazon.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 */

import { ApiClient } from '../ApiClient.js'
import { ErrorList } from '../model/ErrorList.js'
import { Shipment } from '../model/Shipment.js'
import { ShipmentsResponse } from '../model/ShipmentsResponse.js'
import { SuperagentRateLimiter } from '../../../helper/SuperagentRateLimiter.mjs'
import { DefaultRateLimitFetcher } from '../../../helper/DefaultRateLimitFetcher.mjs'

/**
* ShipmentRetrieval service.
* @module externalfulfillmentshipments_v2024_09_11/api/ShipmentRetrievalApi
* @version 2024-09-11
*/
export class ShipmentRetrievalApi {
  // Private member stores the default rate limiters
  #defaultRateLimiterMap

  /**
    * Constructs a new ShipmentRetrievalApi.
    * @alias module:externalfulfillmentshipments_v2024_09_11/api/ShipmentRetrievalApi
    * @class
    * @param {ApiClient} [apiClient] Optional API client implementation to use,
    * default to {@link ApiClient#instance} if unspecified.
    */
  constructor (apiClient) {
    this.apiClient = apiClient || ApiClient.instance
    this.initializeDefaultRateLimiterMap()
  }

  /**
     * Initialize rate limiters for API operations
     */
  initializeDefaultRateLimiterMap () {
    this.#defaultRateLimiterMap = new Map()
    const defaultRateLimitFetcher = new DefaultRateLimitFetcher()
    const operations = [
      'ShipmentRetrievalApi-getShipment',
      'ShipmentRetrievalApi-getShipments'
    ]

    for (const operation of operations) {
      const config = defaultRateLimitFetcher.getLimit(operation)
      this.#defaultRateLimiterMap.set(operation, new SuperagentRateLimiter(config))
    }
  }

  /**
     * Get rate limiter for a specific operation
     * @param {String} operation name
     */
  getRateLimiter (operation) {
    return this.#defaultRateLimiterMap.get(operation)
  }

  /**
     * Get a single shipment with the ID you specify.
     * @param {String} shipmentId The ID of the shipment you want to retrieve.
     * @return {Promise<Shipment>}
     */
  getShipmentWithHttpInfo (shipmentId) {
    const postBody = null

    // verify the required parameter 'shipmentId' is set
    if (shipmentId === undefined || shipmentId === null) {
      throw new Error("Missing the required parameter 'shipmentId' when calling getShipment")
    }

    const pathParams = {
      shipmentId
    }
    const queryParams = {
    }
    const headerParams = {
    }
    const formParams = {
    }

    const contentTypes = []
    const accepts = ['application/json']
    const returnType = Shipment

    return this.apiClient.callApi('ShipmentRetrievalApi-getShipment',
      '/externalFulfillment/2024-09-11/shipments/{shipmentId}', 'GET',
      pathParams, queryParams, headerParams, formParams, postBody,
      contentTypes, accepts, returnType, this.getRateLimiter('ShipmentRetrievalApi-getShipment')
    )
  }

  /**
     * Get a single shipment with the ID you specify.
     * @param {String} shipmentId The ID of the shipment you want to retrieve.
     * @return {Promise<Shipment>}
     */
  getShipment (shipmentId) {
    return this.getShipmentWithHttpInfo(shipmentId)
      .then(function (response_and_data) {
        return response_and_data.data
      })
  }

  /**
     * Get a list of shipments created for the seller in the status you specify. Shipments can be further filtered based on the fulfillment node or the time of the shipments&#39; last update.
     * @param {String} status The status of shipment you want to include in the response. To retrieve all new shipments, set this value to &#x60;ACCEPTED&#x60;.
     * @param {Object} [opts] Optional parameters
     * @param {String} [opts.locationId] The Amazon channel location identifier for the shipments you want to retrieve.
     * @param {String} [opts.marketplaceId] The marketplace ID associated with the location. To find the ID for your marketplace, refer to [Marketplace IDs](https://developer-docs.amazon.com/sp-api/docs/marketplace-ids).
     * @param {String} [opts.channelName] The channel name associated with the location.
     * @param {String} [opts.lastUpdatedAfter] The response includes shipments whose latest update is after the specified time. In [ISO 8601](https://developer-docs.amazon.com/sp-api/docs/iso-8601) date-time format.
     * @param {String} [opts.lastUpdatedBefore] The response includes shipments whose latest update is before the specified time. In [ISO 8601](https://developer-docs.amazon.com/sp-api/docs/iso-8601) date-time format.
     * @param {Number} [opts.maxResults] The maximum number of shipments to include in the response.
     * @param {String} [opts.paginationToken] A token that you use to retrieve the next page of results. The response includes &#x60;nextToken&#x60; when there are multiple pages of results. To get the next page of results, call the operation with this token and include the same arguments as the call that produced the token. To get a complete list, call this operation until &#x60;nextToken&#x60; is null. Note that this operation can return empty pages.
     * @return {Promise<ShipmentsResponse>}
     */
  getShipmentsWithHttpInfo (status, opts) {
    opts = opts || {}
    const postBody = null

    // verify the required parameter 'status' is set
    if (status === undefined || status === null) {
      throw new Error("Missing the required parameter 'status' when calling getShipments")
    }

    const pathParams = {
    }
    const queryParams = {
      locationId: opts.locationId,
      marketplaceId: opts.marketplaceId,
      channelName: opts.channelName,
      status,
      lastUpdatedAfter: opts.lastUpdatedAfter,
      lastUpdatedBefore: opts.lastUpdatedBefore,
      maxResults: opts.maxResults,
      paginationToken: opts.paginationToken
    }
    const headerParams = {
    }
    const formParams = {
    }

    const contentTypes = []
    const accepts = ['application/json']
    const returnType = ShipmentsResponse

    return this.apiClient.callApi('ShipmentRetrievalApi-getShipments',
      '/externalFulfillment/2024-09-11/shipments', 'GET',
      pathParams, queryParams, headerParams, formParams, postBody,
      contentTypes, accepts, returnType, this.getRateLimiter('ShipmentRetrievalApi-getShipments')
    )
  }

  /**
     * Get a list of shipments created for the seller in the status you specify. Shipments can be further filtered based on the fulfillment node or the time of the shipments&#39; last update.
     * @param {String} status The status of shipment you want to include in the response. To retrieve all new shipments, set this value to &#x60;ACCEPTED&#x60;.
     * @param {Object} [opts] Optional parameters
     * @param {String} [opts.locationId] The Amazon channel location identifier for the shipments you want to retrieve.
     * @param {String} [opts.marketplaceId] The marketplace ID associated with the location. To find the ID for your marketplace, refer to [Marketplace IDs](https://developer-docs.amazon.com/sp-api/docs/marketplace-ids).
     * @param {String} [opts.channelName] The channel name associated with the location.
     * @param {String} [opts.lastUpdatedAfter] The response includes shipments whose latest update is after the specified time. In [ISO 8601](https://developer-docs.amazon.com/sp-api/docs/iso-8601) date-time format.
     * @param {String} [opts.lastUpdatedBefore] The response includes shipments whose latest update is before the specified time. In [ISO 8601](https://developer-docs.amazon.com/sp-api/docs/iso-8601) date-time format.
     * @param {Number} [opts.maxResults] The maximum number of shipments to include in the response.
     * @param {String} [opts.paginationToken] A token that you use to retrieve the next page of results. The response includes &#x60;nextToken&#x60; when there are multiple pages of results. To get the next page of results, call the operation with this token and include the same arguments as the call that produced the token. To get a complete list, call this operation until &#x60;nextToken&#x60; is null. Note that this operation can return empty pages.
     * @return {Promise<ShipmentsResponse>}
     */
  getShipments (status, opts) {
    return this.getShipmentsWithHttpInfo(status, opts)
      .then(function (response_and_data) {
        return response_and_data.data
      })
  }
}
